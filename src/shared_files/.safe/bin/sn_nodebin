#!/usr/bin/env python

from pathlib import Path
from subprocess import run

def nodebin():
  
  node_logs_exists = False
  nodes_path = Path('~/.safe/node').expanduser()  
  for x in nodes_path.iterdir(): 
    if x.is_dir() and x.name[0:8] == "node_dir":
      for y in x.iterdir():
        if y.name == "sn_node.log":
          run("tac {} | sed -e '/ERROR/{N;N;q}' | tac | tb".format(y))
          node_logs_exist = True
  if node_logs_exist == False:
    print("No node logs found.") 

if __name__ == '__main__':
  nodebin()
